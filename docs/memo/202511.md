# 11/4

## Jest と Native ESM の相性問題

Node.js で Require ESM が利用可能になって以降、ESM のみを提供するライブラリが増加傾向である。
おしごとでいうと、先日リリースされた Storybook v10 もその典型。

こうなってくると、CJS 前提でしか動作しない Jest の利用が厳しくなってくる。

Jest に対する延命措置としては、以下のように swc や ts-jest に対して、ESM パッケージもトランスパイルするように指示してしまえば回避は可能。

```js
module.exports = {
  // Other Jest config options...
  transformIgnorePatterns: ["node_modules/(?!(@storybook|storybook)/)"],
};
```

Vitest も v4 でたことだし、そろそろ真面目に以降していかないとダメな時期になってしまっているのかも。。。
