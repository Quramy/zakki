# 12/1

## Storybook

SB の RSC 対応 issue で、直近数日に動きがあった。

https://github.com/storybookjs/storybook/issues/21540#issuecomment-1833840698

以下のような Decorator で Async Component を含む Story をラップすればよい」という内容。

```jsx
import { Decorator } from "@storybook/react";
import { Suspense } from "react";

export const WithSuspense: Decorator = (Story) => {
  return (
    <Suspense>
      <Story />
    </Suspense>
  );
};
```

試しに手元の `@storybook/react` の v7.5.3 で試したところ、ちゃんと描画される。

```tsx
import { Suspense } from 'react'
import type { Meta, StoryObj } from '@storybook/react'

async function MyAsyncComponent() {
  const res = await fetch('/iframe.html')
  return (
    <div>
      <p>Fetch status: {res.status}</p>
    </div>
  )
}

const meta = {
  title: 'components/MyAsyncComponent',
  component: MyAsyncComponent,
  args: {},
  decorators: [
    (Story) => (
      <Suspense fallback={<div>Load story...</div>}>
        <Story />
      </Suspense>
    ),
  ],
} satisfies Meta

export default meta

type Story = StoryObj<typeof MyAsyncComponent>

export const Default = {} satisfies Story
```

「非同期コンポーネントが許容されるのは SC のみ」と理解していたので、なぜにこれで動くのかさっぱりわからん..
というよりも、CC でも非同期コンポーネントが許容されるのであれば、 `use()` を持ち出す必要も無いことになるし。

https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#:~:text=we%20introduced%20async%20/%20await%20as%20the%20primary%20way%20to%20do%20data%20fetching%20from%20Server%20Components

---

# 12/6

## Storybook

先日に書いた Suspense Decorator の件があれよあれよという間に時期リリース向けのブランチに取り込まれていた。

> 以下のような Decorator で Async Component を含む Story をラップすればよい」という内容。

https://github.com/storybookjs/storybook/pull/25091

どうにもモヤつくので、以前書いた RSC のテストの記事に追記. https://quramy.medium.com/react-server-component-%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%81%A8-container-presentation-separation-7da455d66576

`experimentalNextRSC` フラグは `@storybook/react` v8 で入りそうだが、これとは別に v8 で Storybook 側の Next.js サポートの下限が v13.5 まで上がっているので注意。

https://github.com/storybookjs/storybook/pull/25017

## StyleX

ついに公開された

https://stylexjs.com/

## CSS

CSS Text Module level 4 における `word-break: auto-phrase` や `text-autospace` の解説:

https://developer.chrome.com/blog/css-i18n-features?hl=ja

Chrome は BudouX というテキスト処理系を利用することで実現するとのこと。

BudouX については https://b-risk.jp/blog/2021/12/budoux/ もわかりやすかった。

---

# 12/7

## Prisma

https://github.com/prisma/prisma/releases/tag/5.7.0 にて `relationJoins` Preview Feature が利用可能に。

`include` などで Relation 跨いだ Model をクエリするときに、PostgresDB や CockroachDB ではネイティブ SQL の `JOIN` が利用されるようになる。

また、 v5.7.0 では `nativeDistinct` という Feature Flag も追加されている。名称そのまま。

## GraphQL

Semantic Non Null 周りをアドカレの記事にした。

https://quramy.medium.com/graphql-%E3%81%AE-semantic-non-null-type-rfc-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6-49fb18a06afb

---

# 12/8

## Parser

再帰下降パーザで incomplete 性をどう扱えばいいのかを正しく知りたいため、文献探し。

以下のスレッドからリンクを辿っていくのが良さそう。

- https://stackoverflow.com/questions/12416903/any-references-for-parsing-incomplete-or-incorrect-code
- https://www.reddit.com/r/Compilers/comments/p1f2ps/recursive_descent_parsers_with_good_error_recovery

[Efficient and Comfortable Error Recovery in Recursive Descent Parsers](https://www.cocolab.com/products/cocktail/doc.pdf/ell.pdf) が良さそう？

## Misc

たまたま TL に流れてきた https://twitter.com/schwer_metall/status/1731992791528456653 飛んだ PDF があまりにも面白くて読みふけってしまった。

[日本の IT は何故弱いか](https://shayashiyasugi.com/wwwshayashijp/myfailures.pdf) という稿で、[イノベーション政策の科学: SBIR の評価と未来産業の創造](https://www.amazon.co.jp/%E3%82%A4%E3%83%8E%E3%83%99%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%94%BF%E7%AD%96%E3%81%AE%E7%A7%91%E5%AD%A6-SBIR%E3%81%AE%E8%A9%95%E4%BE%A1%E3%81%A8%E6%9C%AA%E6%9D%A5%E7%94%A3%E6%A5%AD%E3%81%AE%E5%89%B5%E9%80%A0-%E5%B1%B1%E5%8F%A3-%E6%A0%84%E4%B8%80/dp/413046115X/ref=sr_1_1?ie=UTF8&qid=1429026553&sr=8-1&keywords=%E5%B1%B1%E5%8F%A3%E6%A0%84%E4%B8%80) 書籍にて 9 章として所収された論文の草稿にあたる。

稿末に以下の結言が登場する。

> もし、日本の IT の弱さ、IT 人材の不足の問題を変えたいというのならば、それは日本社会そのものを変えるしかない。

この結論に至る過程において、「IT のスペシャリストを専門的に育成するような機関を設けたところで、それを受容する社会や引いてはその社会を生み出す精神がなければ、意味がない」という旨のことが書いてあった。

2015 年に出版されているので、書いてある内容は 2010 年代前半くらいまでの内容、ということになるのだろうか（ Map Reduce や Hadoop などのタームが出てくるあたり、なんとなくその当時の時勢を感じる）。

マクロな話なので、自身の卑近な例で解釈するのは間違っているかもしれないが、この稿が書かれた当時に「育成された」側であった自分は、社会に受け入れてもらえているんだろうか？と考え込んでしまった。
社会自体が変容していないのであれば、自分が「受容されている」と感じていたとしても、それはただコンフォートゾーンに留まっているだけかもしれない。
