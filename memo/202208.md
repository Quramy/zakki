# 8/1

## Bun.sh

@yosuke_furukawa さんの記事が公開されていたのでざっと読んだ。

https://techfeed.io/entries/62e73bcd93a91410f0896d19

先日に社内の共有会で聞いた内容の方が濃かったため、そういう意味では先に内容聞けてよかったな、という印象。

この記事に関連した Tweeet で @ky3k さんが https://twitter.com/kt3k/status/1554066630954844160 を書いていて、こっちが割と気になった。

> あと Bun のデザインで分からない事というと、import と require の扱いがよく分からない。Bun では import と require が両方同時にそのまま使える。

これもある意味で「（Bun は）すごくマーケティングがうまい」の話の一環に読めてしまう。

なんだかんだで Native ESM にこだわっている(ちゃんと向き合っている) のってまだまだ一部の人に閉じていて、「`import` だろうと `require` だろうと動けばいいんだよ、うごけば！」というモノを望んている層がマジョリティなんじゃないだろうか。
こういった要求そのものは理解できなくはないものの、それを中間層の build レイヤで吸収しようとして、色々な負債がこの 10 年くらいに生まれてしまっているのは純然たる事実だと思っているので、そこに拍車をかけるような動きは勘弁して欲しい。

## DynamoDB

https://github.com/ca98am79/connect-dynamodb/pull/74 について。

発端としては 副業先であった「DynamoDB を storage としている場合の Session について、Session ID (= Primary Key) 以外を指定して 外部から Invalidate Session したい」という要求。
Dynamo の Secondary Index(special key) が使えれば、素直に設計できていいよね、ということで connect-dynamodb でも special key を利用可能にしてもらったのが上記の PR。

---

# 8/3

## Apollo

Survey に回答

https://github.com/apollographql/apollo-client/issues/9930

## Apollo Client

久しぶりに Apollo Client の Roadmap を確認する。

https://github.com/apollographql/apollo-client/blob/main/ROADMAP.md

- 3.7(next)
  - `@defer` / `@stream` の対応が入りそう
  - `useFragment` がサポートされそう https://github.com/apollographql/apollo-client/issues/8236
    - ただし部分的っぽい
- 3.8
  - `useFragment` と `useBackgroundQuery` の対応
    - `useBackgroundQuery` が `useFragment` を強化する位置づけっぽい？
    - https://github.com/apollographql/apollo-client/issues/8236#issuecomment-857178202 を読めば理解できそう。
- 3.9
  - React Suspense の対応が目玉
  - この辺りになってくると、いつになってくるのやら感がすごい
  - React v18 full support については、2021 年くらいからずっと議論されているし..
- 3.10
  - React SSR 関係
- 4.0
  - React Layer の v18 対応が完全に終わっている状態
  - Major Update なので BC が幾つか含まれる
  - 特に Apollo サイドの意思決定として大きそうなのは https://github.com/apollographql/apollo-client/issues/8190 の Module Entry Point 分離の件か
  - というか、これはホントにとっとと対応して欲しい

## Misc

hey での技術負債解消サイクルの紹介について

https://tech.hey.jp/entry/2022/08/02/124056
