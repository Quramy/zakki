# 9/1

## WebAssembly

@yosuke_furukawa さんに共有してもらった WASM の文字列に関する記事

https://medium.com/wasm/strings-in-webassembly-wasm-57a05c1ea333

軽く眺めた感じ、Rust の wasm-bindgen の Getting Started 的な色合いが強く、Canonical ABI や Interface Types についての話はあまり言及されていなさそう。

あんまりまだ Canonical ABI がわかってないんだけど、"ABI" というからには「WASM の Module を使う側で lift などをしろよ」という話なので、まさに bindgen がやっていることが当面の仕様になるんじゃね？と思ってるんだけど、この辺りの理解があっているかの答え合わせになっているんだろうか。

---

# 9/2

## reg

同僚からの報告にて。どうも reg-cli の v0.18.x でバグがあるっぽい。というか、連携されたレポート画面の URL 確認したらダイアログが立ち上がらない状況になってた。

---

# 9/3

## node-fetch

node-fetch v3 が知れっと出ていたけど、違いとして、以下がある、という話を会社できいた。

- WHATWG URL を利用するようになった
- timeout option が廃止されて、AbortController 利用が必須になった

そういえば AbortController 全然わかってないな。。。

---

# 9/7

## CSS

backdrop がある Overlay 系の CSS について。

そもそもこの手の CSS 書く機会が年に 1, 2 回あるかどうか程度なんだけど、毎回 「backdrop 透過して scroll が伝播する」という件の対処方法を忘れる。

https://css-tricks.com/prevent-page-scrolling-when-a-modal-is-open/

まずは `overflow-y` 使うパターン。

```css
body {
  overflow-y: auto;
}

body.modal-open {
  overflow-y: hidden;
  padding-right: 15px; /* reflow を防ぐため */
}
```

backdrop 描画したときに、body に `addClass`して scroll 抑止する。これは一見上手く動くし、割と簡単なんだけど、 iOS デバイスだと不十分。

### Rails

手元の database がにっちもさっちも行かなくなったときに以下で reset しつつ、migration を 1 から実行できることを知った。

```sh
rake db:migrate:reset
```

database の削除だけを実行したい場合、

```sh
rake db:drop
```

---

# 9/8

## CSS

SP で所謂 "Pull-to-Refresh" 的な操作をやられたときに起こる「スクロール可能な位置よりもさらに引っ張る」のような操作をされた場合に「引っ張られたコンテンツが`positino: fixed` な FAB 系のコンテンツとぶつかってしまい見栄えが悪い」という相談を受けた。

結局、対処方法は何も出てこなかったんだけど、この話を聞く過程で「スクロール可能な位置よりもさらに引っ張る」ときの挙動が CSS で制御できることを知る。

```css
.hoge {
  overscroll-behavior: none;
}
```

ただ、2021 年現在だと、iOS Safari が未対応なので、あんまり意味のない情報なんだけども(vendor-prefix もないっぽい)

https://caniuse.com/mdn-css_properties_overscroll-behavior

どうでもいいけど、`scroll-behavior` と紛らわしい

## Next.js

社内の Next.js 研修資料を勝手に眺めていたときに "granular chunking" というキーワードが気になったので調べる。適当にググったら web.dev が出てきた。

https://web.dev/granular-chunking-nextjs/

複数ページで共有されるような `common.js` にまとめるような戦略をより効率的にきめ細かくやろうぜ、という類の話っぽい。

## Misc

ようやく GitHub が 365 streak になったー :tada:

---

# 9/9

## JavaScript

`Object.is` と `NaN` の話を聞く。

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/is#using_object.is

細かくて、毎回叩きながら思い出してるやつだ。。。

```js
console.log(0 / 0 === NaN); // false
console.log(Object.is(0 / 0, NaN)); // true
```

## Storybook

https://storybook.js.org/docs/react/configure/environment-variables

Storybook で env value を設定したときに、下記のように `%` で値を囲むと環境変数の Placehold ができるのね。。。

```html
<link rel="stylesheet" href="%STORYBOOK_STYLE_URL%" />
```

HTML 中での置換は Storybook 本体というよりも何かしらの loader の機能だと思うんだけど、Storybook 文脈だと Deploy 先に合わせて base path 変えたい、というのはよくあるユースケースなので、知っておくと便利そう。
