# 6/1

## Git

`.git/info/exclude` を使うと、「.gitignore にすらコミットしたくない自分専用ファイル」を置ける。

みんな当たり前に知ってるものなのかな。。。

## Ruby

手元で .rb ファイルをフォーマットしたいので、 Rubocop を導入してみた。

```sh
rubocop -x
```

---

# 6/5

## Storybook

React SC って SB で描画できんの？ が気になって調べてみたが、やはりまだ無理な模様

https://github.com/storybookjs/storybook/issues/21540

---

# 6/6

## React Email

https://react.email/docs/cli

## Next.js

ようやく `fetch` と Next.js の Cache の関係が頭の中に入るようになってきたかも。

元々 gSSP か gSP だったところが、オプションの有無で置換される(どちらも `fetch` でしかなくなった)ってことか。

- gSSP: `fetch(..., { cache: "no-store" })`
- gSP: `fetch(..., { next: { revalidate: 300 })`

https://nextjs.org/docs/app/api-reference/functions/fetch

---

# 6/7

## CSS

久ぶりに Reset や normalize のことを考えたせいで、sanitize.css の名前をことを思い出した。

https://csstools.github.io/sanitize.css

おそらく初見じゃないはずなんだが、年に数回程度しかこのレイヤのことを考えないので大体忘れてしまう。

ついでに GitHub 上で sanitize.css のコードを眺めていたら、↓ のような記法が目についた。

```css
:where(nav) :where(ol, ul) {
  list-style-type: none;
  padding: 0;
}
```

ref: https://github.com/csstools/sanitize.css/blob/main/sanitize.css#L89-L96

https://developer.mozilla.org/ja/docs/Web/CSS/:where

`:where` の擬似クラスって一体なんだと思ったが、上記の CSS を例に取ると、スタイルの当たり方は以下と一緒。

CSS Nesting で書くのであれば、以下と同等。

```css
nav {
  & ul,
  ol {
    list-style-type: none;
    padding: 0;
  }
}
```

ただし、詳細度の観点でいうと意味が異なってくる。

以下の CSS を追加で与えた場合、 `:where` の詳細度に関しては最小の 0 のままである一方、`nav ol` のセレクタは要素セレクタが二重にかかる部分、単独の `ol` で上書きすることはできない。

```css
ol {
  color: blue;
}
```

デフォルトとして作用させておいて他のセレクタから上書きを想定する CSS に関しては、`:where` 使っておくのが無難、ということか。

## Next.js

Server Actions について、エラーとなってしまう条件が何通りかあるはずなんだが、これらをどうやってハンドリングすればいいのやら。。。

1. Server Action 以前に HTTP を開始できなかったケース
1. Server Action に到達する前に、Reverse Proxy レイヤで 502 や 503 が返却されるケース
1. Server Action が 何かしらのエラーとなる(= Promise を rejection した場合)

最後の 3. についてはわかりやすく、Error Boundary に捕捉されるだけ。 2. の場合でも同じ挙動となってくれるんだろうか？ Client Component は RSC Protocol としての結果を期待している状況で、Reverse Proxy 層が HTML であったり AWS WAF の XML 形式のような Response が返ってくることになるんだけど、それは一体どこでハンドリングされるんだろう。

## TypeScript

すっかり忘れていたが、 5.1 の Stable 出ていた

https://devblogs.microsoft.com/typescript/announcing-typescript-5-1/
