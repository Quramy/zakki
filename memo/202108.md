# 8/2

## GraphQL Codegen

はじめて真面目に graphql-code-generator の Client 側使ってみたけど、gql 側の Enum がそのまま TypeScript の Enum になるのか。普通に文字列として扱えた方が楽なような。。。

## typescript-eslint-language-service

eslint@7.30.0 の renovate bot がコケていたので調査。これに死ぬほど難航して 3 時間くらい溶かした。

直接の原因は https://github.com/eslint/eslint/pull/14622 で、これの中で config の parser option から `ecmaVersion` をチェックするような実装が加わっている。

で、この check について、parser が ESLint デフォの esprima かどうかを確認するところで、 `config.parser.definition` というオブジェクトを見るようになっていて、、、、というところで、自分のテストコードに食わせていた config が中途半端だったせいで Linter 中で type error になっていた。

Language Service Adapter は発生した Error を握りつぶす実装にしていたこともあって、気づくのにかなり時間がかかってしまった。

```ts
class TestingConfigProvider implements ConfigProvider {
  public conf: any = {
    // ConfigDependency Class を使うとちゃんと definition を与えることができる
    parser: new ConfigDependency({
      definition: require("@typescript-eslint/parser"),
      error: null,
      id: "@typescript-eslint/parser",
      filePath: path.resolve(
        __dirname,
        "../node_modules/@typescript-eslint/parser/dist/parser.js"
      )
    }),
    parserOptions: { ecmaVersion: "latest" }
  };
  public getConfigArrayForFile(): ConfigArray {
    return new ConfigArray(this.conf);
  }
}
```
