# 7/1

## Node.js

Chalk と同等の機能を core の util に入れるかどうか、という問題 ( https://github.com/nodejs/node/issues/43382#issuecomment-1166267429 ) から波及して、「そもそも Node.js は ESM への移行を推奨しているのか」という issue が作られていた。

https://github.com/nodejs/TSC/issues/125://github.com/nodejs/TSC/issues/1251

---

# 7/4

## GCP

Cloud pub sub の順序指定キーの話。

https://cloud.google.com/pubsub/docs/publisher?hl=ja#using_ordering_keys

---

# 7/5

## Ruby

https://github.com/deivid-rodriguez/pry-byebug

割とデファクト的に利用されているデバッガツールなのかな。

https://github.com/deivid-rodriguez/byebug が Debugger 本体の機能で、 https://github.com/pry/pry がリッチなコンソール(より高機能な irb)。

インストールはシンプルに以下。

```ruby
gem 'pry-byebug'
```

```ruby
# main.rb
require 'pry-byebug'

RANGE=0...10

def main
  RANGE.each do |x|
    puts x
    binding.pry # Breakpoint
  end
end

main
```

`bundle exec pry main.rb` とか `bundle exec ruby main.rb` などで実行すれば、Breakpoint を打った箇所で pry の REPL が開始される。

コマンドは何種類か用意されているが、とりあえず `continue` と `step` あたりを頭の片隅に留めておけば後は何とかなりそう。

## Docker

上記の pry-byebug と関連する件。

docker-compose で Rails を立ち上げているときに、特定のコードに `binding.pry` を仕込んだ場合に、pry の操作をどうやるのか、という文脈。

以下のように `attach` sub command で、up したプロセスをターミナルにアタッチすることができる。知らなかった。

```sh
docker attach <CONTAINER_NAME_OR_ID>
```

https://docs.docker.com/engine/reference/commandline/attach/

---

# 7/7

## Rails

テーブルに index を付与するための方法:

https://forest-valley17.hatenablog.com/entry/2018/09/12/163849

## Misc

おしごとで「過去にまわしてしまったバッチに誤りがあった」という類の障害対応を行った。
そもそも、新卒の会社を辞めて以来数年は Web フロントにばかり軸足を置いていたので、バッチや DB 周りの修正であったり調査が自分自身のタスクになること自体がすごく久しぶりだ。というか、新卒の頃まで含めてもあったっけ、、というレベル。

正直、この手の瞬発力が必要な対応について、今時点の自分のスキルだとあまり具体作業レベルでは役に立たないんじゃないかと思っていたが、やってみたら意外とそうでもなかったのは嬉しい誤算だった。
もちろん、同僚のエンジニアと分担での作業ではあったが、思いがけない知識が途中途中で活きてきた。それは、例えば対応開始時点ではまったく思い出しもしなかった Google Analytics の知識であったり、スプレッドシートや JavaScript のちょっとした小技であったり。

[去年の 12 月に書いた内容](202112.md#firebase-analytics) が障害の対応で役に立つなんて、思いもよらなかったが、こうして書き溜めるという行為があったお陰で、知識としては頭に引っかかった状態になっていて、それを実際に情報として取り出せて利用できたわけだけど、何だかんだ、自分の性格に助けられたようなものだし、意外と経験って身についてるということを実感。
