# 1/1

## Croquette

引き続き Store の cache 層を作っていく。

`readQuery` だけじゃなくて、あわせて `writeQuery` 相当も実装していかないと、cache で保持すべき内容などが見えてこないな。

## Node.js

Croquette を packaging するにあたって、CJS/ESM の Dual Exports をやってみる。

下記が参考になりそう:

- https://nodejs.org/api/packages.html#packages_conditional_exports
- https://blog.cybozu.io/entry/2020/10/06/170000

---

# 1/4

## AST Explorer

PR にレス付いてたので見に行ってみたら、「Angular ESLint v1.0.0 出てるよ！」とのことだった。いつの間に。とりあえず package.json 更新して再 push しておいた（最早自分で使いたいモチベーションはだいぶ下がったけど）。

## CSS

`env()` 関数で iOS の `safe-area-inset-bottom` とか取れるのか。知らなかった。

https://developer.mozilla.org/ja/docs/Web/CSS/env()

iOS 11 以降で使える。 https://caniuse.com/css-env-function

## GraphQL

urql の comparison ページが色々まとまっててわかりやすい。

https://formidable.com/open-source/urql/docs/comparison/

意外と alternative apollo ってあるものなのかな。 Guild の slack で [RedWood が Apollo から graphql-hooks ](https://github.com/redwoodjs/redwood/issues/1455) に乗り換える件が言及されてたし。

Apollo のコメントでも、「Apollo -> urql に乗り換えたい」的なコメントが付き始めてるしな。。。
https://github.com/apollographql/apollo-feature-requests/issues/162#issuecomment-752972814

> I've been patiently waiting for over a year for this feature to get implemented so I can standardize the way I structure my code around suspense. Sorry to be that guy, but I think I'm done waiting for "that one" feature that haven't got enough attention from maintainers to deserve some love, even though every other library has at least opt-in support. Switching to urql after years of betting on Apollo's stack.

urql にしても graphql-hooks にしても、fragment の扱いが凄く小さいのが気になるんだよな。。。皆は Collocation を求めてないのだろうか？

---

# 1/5

## Android

Android での画面サイズ(web での viewport と同じかな...?)って dp(density independent pixels)と呼ぶのを初めて知った。初歩知識っぽい。

https://qiita.com/nein37/items/0a92556a80c6c14503b2#dp

## Next.js

みずち君の記事にて、Next.js + Server Components の demo repository できてるのを知る

https://github.com/vercel/next-server-components

---

# 1/6

## typed-css-modules

「このレポジトリ、メンテナンスしてんの？」って突っ込まれた。。。
確かに放置してる PR 多い、モチベーションがあんまりないのはそれはそう。

## 読書

購入してほったらかしにしていた Web + DB Press vol 120 を流し読み。

特集の「自作 OS x 自作ブラウザ」を期待して購入したわけだけど、OS を作る話が出てくるわけではなかった。
「この特集のページ量でどうやって OS 作る話盛り込むんだろう？」っていう意味でも期待していたので、「筆者の作った OS 上で実装してみましょう」というのはちょっと残念。特集名詐称感ある。

## Misc

何の気なしに [プログラミングスクールのメンターを辞めました](https://qiita.com/rhiroe/items/4349b9f412364aa2c729) という記事を読んだ。「何を当たり前のことを。。。」という内容なんだけど、逆に言うとスクールってその「当たり前」すら通用しない世界ってことなんだろうな。

---

# 1/7

## typed-css-modules

> 「このレポジトリ、メンテナンスしてんの？」って突っ込まれた。。。

昨日、これ書いてた人から早速 PR きてた。早めに見てあげないとな。 https://github.com/Quramy/typed-css-modules/pull/100

```ts
import { hogeFoo } from "./MyComponent.css";
```

みたいに named import するための PR だった。 webpack に同じ意味の option があるらしい。 https://webpack.js.org/loaders/css-loader/#namedexport
正直、CSS Modules で tree shaking 気にしたことないから全然興味なかったけど、巨大な.css ファイルを共通利用してたりすると多少の違いはありそうだな。

## Stylelint

Prettier との競合をさけるための設定集

https://github.com/prettier/stylelint-config-prettier

eslint-config-prettier と似てるな（README にも参考にした、って書いてあるし）

## TypeScript

そろそろ 4.2 のネタ追っておこうと思ったけど、明日に beta build、1/12 に beta release だ。

https://github.com/microsoft/TypeScript/issues/41601 と 4.2.0 milestone 眺めたけど、そんなに面白そうなものは無さそう。

---

# 1/8

## Storycap

同僚から PR もらうも、「lazy loading な img について request を発生させるために scroll させるオプション」というかなり限定的な代物だった。

https://github.com/reg-viz/storycap/pull/340

`waitFor` でできるよ、という返しを行って close。

## ng-japan

スタッフ定例にて、「締切駆動にしないと何も output できない」件を相談したら、ng-japan on air の枠を用意してくれた。ありがてぇ。

---

# 1/12

## HTML

`<ol>` に `type` 属性があることを知った。CSS 側の `list-style-type` と同じ値が書ける。

https://html.spec.whatwg.org/#the-ol-element

## GraphQL

Spec repo の PR がいくつか merge されてる & [Draft](https://spec.graphql.org/draft/) ページが 2021/1/11 付けの更新されてた。
正直、現状の release 分との差分はあんまりわからないな。RFC 系は draft にはいないし。
気になった変更箇所は下記あたりか:

- Directive 定義において、`repeatable` keyword が利用可能に
- `ExecutableDirectiveLocation` に `VARIABLE_DEFINITION` が追加
- `server` という term を使うのをやめて、 `service` に変わった
- input object で「循環参照が許容されること」が明言された。 https://spec.graphql.org/draft/#sec-Input-Objects.Circular-References
- Fragment Spread に関して、Interface 上における Spread の扱いが明言された。 https://spec.graphql.org/draft/#sec-Abstract-Spreads-in-Abstract-Scope.Interface-Spreads-in-implemented-Interface-Scope

新しい RFC でいうと Schema Coordinates の件が加わった、くらいか。 https://github.com/graphql/graphql-spec/blob/master/rfcs/SchemaCoordinates.md

ついでに何となく眺めてたら目に入った issue で、「DateTime 型の built in scalar を設けたい」というものがあった。 https://github.com/graphql/graphql-spec/issues/579

https://github.com/graphql/graphql-spec/pull/315 で一回 close されている議論なんだけど、必要、という意見が強いのかな。

---

# 1/13

## CSS

毎度わからなくなる「iOS でダブルタップ時の拡大を防ぎたい」やーつ。

```html
<!-- これは随分前から駄目 -->
<meta name="viewport" content="user-scalable=no" />
```

このケースだと、CSS の `touch-action` が正解っぽい。

https://compat.spec.whatwg.org/#touch-action

https://w3c.github.io/pointerevents/#details-of-touch-action-values

> The user agent MAY consider touches that begin on the element only for the purposes of scrolling and continuous zooming. Any additional behaviors supported by auto are out of scope for this specification.

> Disabling some default touch behaviors may allow user agents to respond to other behaviors more quickly. For example, with auto user agents typically add 300ms of delay before click to allow for double-tap gestures to be handled. In these cases, explicitly setting touch-action: none or touch-action: manipulation will remove this delay. Note that the methods for determining a tap or double-tap gesture are out of scope for this specification.

とあるので、いわゆる fast tap を有効化しつつ、double click zoom を抑止できる

---

# 1/14

## Vim

Vim 上で tmux みたいなことができるのかな？ちょっと面白そう。 https://github.com/mhinz/vim-startify

## HTML

```html
<input inputmode="numeric" />
```

みたいにしか使ったことなかったので、input 個別の属性だと思ってたけど、 `inputmode` は global 属性だったことを知った。でもまぁよくよく考えたら、 `contenteditable` と併用するケースあるだろうし、要素に関係なく指定できていいのか。

## Docker

言葉しか知らなかった「マルチステージビルド」について、ドキュメントを初めて読む。
https://matsuand.github.io/docs.docker.jp.onthefly/develop/develop-images/multistage-build/
