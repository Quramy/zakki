# 12/1

## GraphQL

Cookpad のアドカレ https://techlife.cookpad.com/entry/2020/12/01/093000 を軽く読んだ。

既存の RESTish な API を GraphQL でラップすると、N+1 が容易に発生しそうと思ったが、 Rails 側で利用している https://github.com/cookpad/garage という Cookpad 製の Framework が GraphQL フレンドリなお陰で GraphQL gateway が起きやすい、という模様。

## typescript-eslint-language-service

`@typescript-eslint` v4.9.0 の update で落ちてた。

extra options を作る箇所が原因。

build が失敗した直接の原因は、

```ts
interface Extra {
  projects: string[];
}
```

から

```ts
interface Extra {
  projects: CanonicalPath[];
}
```

に型変更が起きていたため。また `CanonicalPath` は所詮ただの string なんだけど、例の `Phantom Type` 的な hack がされている型。
`CanonicalPath` の生成をしているコードを読むと、glob やらを使った割と泥臭いコードが internal function として書かれていて、「同じ部分をコピーしてくるのか？ダルい...」と思っていたけど、よくよく考えたら https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/typescript-estree/src/ast-converter.ts#L9 にわたす部分だけちゃんと設定すれば後は関係ないことにコードを読んでいて気づく。

## TypeScript

@kazupon さんが作っている Doc 生成系ツール https://github.com/kazupon/api-docs-gen

（tsdoc 使われてないよねーの文脈で教わる）

ts-graphql-plugin で放置している addon の interface 定義を markdown にする部分で使えそうな気配ある。

## Misc

昨日書いた Puppeteer の記事、結局アドカレ化することになるという（上司公認）。。。
